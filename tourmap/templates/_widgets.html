{# Macro creating a table of activities #}
{% macro table_activities_summary(activities, truncate_name_len=32) -%}
<table class="activities-table table table-striped table-condensed">
    <thead>
        <tr>
        <td>Date</td>
        <td>Name</td>
        </tr>
    </thead>
    <tbody>
        {% for a in activities %}
            <tr>
                <td>{{ a.start_date_local.date().isoformat() }}</td>
                <td>{{ a.name | truncate(truncate_name_len) }}</td>
            </tr>
        {% endfor %}
        </tbody>
</table>
{%- endmacro %}


{#
 # Macro creating a table of activities with a ton of details...
 #}
{% macro table_activities_detail(activities, truncate_name_len=255) -%}
<table class="table table-striped table-condensed activities-table">
    <thead>
        <tr>
        <th>Date</th>
        <th>Type</th>
        <th>Name</th>
        <th>Distance</th>
        <th>Elevation Gain</th>
        <th>Moving Time</th>
        <th>Elapsed Time</th>
        <th>Average Temperature</th>
        <th>View on Strava</th>
        </tr>
    </thead>
    <tbody>
        {% for a in activities %}
            <tr>
                <td>{{ a.start_date_local.date().isoformat() }}</td>
                <td>{{ a.type }}</td>
                <td>{{ a.name | truncate(truncate_name_len) }}</td>
                <td>{{ a.distance_str }}</td>
                <td>{{ a.elevation_gain_str }}</td>
                <td>{{ a.moving_time_str }}</td>
                <td>{{ a.elapsed_time_str }}</td>
                <td>{{ a.average_temp_str }}</td>
                <td><a href="{{ a.strava_link }}" target="_blank">{{ a.strava_id }}</a></td>
            </tr>
        {% endfor %}
        </tbody>
</table>
{%- endmacro %}


{# Previously had user to generate a /users/ABCD/tours/EFGH url, but
  we may not want to go that route and instead just do /tours/EFGH #}
{% macro table_tours(tours, user=None) -%}
<table class="tours-table table table-striped table-condensed">
    <thead>
        <th>Name</th>
        <th>Map</th>
        <th>Description</th>
        <th>Start</th>
        <th>End</th>
    </thead>
    <tbody>
        {% for t in tours %}
        <tr>
            {% if user %}
              {% set link = url_for("users.tour", user_hashid=user.hashid, tour_hashid=t.hashid) -%}
              {% set map_link = url_for("users.tour", user_hashid=user.hashid, tour_hashid=t.hashid) -%}
            {% else %}
              {% set link = url_for("tours.tour", hashid=t.hashid) -%}
            {% endif %}
            <td><a href="{{ link }}">{{ t.name }}</a></td>
            {% set map_link = url_for("tours.tour_map", hashid=t.hashid) -%}
            <td><a href="{{ map_link }}">{{ t.hashid }}</a></td>
            <td>{{ t.description or "" }}</td>
            <td>{{ t.start_date_str }}</td>
            <td>{{ t.end_date_str }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{%- endmacro %}
